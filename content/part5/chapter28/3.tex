
软件生命周期模型为回答“我们接下来做什么？”提供了一种正式的方法，但很少能够为逻辑上的后续问题，“我们如何做？”提供答案。为了回答这个问题，已经开发了一系列软件工程方法，为专业软件开发提供了实用的经验法则。关于软件方法论的书籍和文章有很多，但其中一些方法特别值得关注：Scrum、统一过程、Rational统一过程、极限编程和软件急救。

\mySubsubsection{28.3.1}{Scrum}

敏捷模型只是一个高层次的基础，并没有具体说明模型应该如何实施。这就是Scrum发挥作用的地方，是一种敏捷方法，提供了精确的描述，说明如何在日常工作中使用。Scrum是业界最常使用的软件工程方法。

Scrum是一个迭代过程。作为一种管理软件开发项目的方法，非常受欢迎。在Scrum中，每个迭代称为一个冲刺周期，冲刺周期是Scrum过程的核心部分。

冲刺周期的长度，在项目开始时应该决定，通常在两周到四周之间。开始一个冲刺之前，团队决定冲刺目标，团队承诺在冲刺结束时交付这些目标。每个冲刺结束时，目标是为客户提供一个完全可工作、经过测试的软件版本，代表客户需求的一个子集。Scrum认识到客户在开发过程中可能会改变主意，所以允许将每个冲刺的结果发送给客户。这给了客户机会看到软件的版本迭代，并向开发团队反馈潜在问题。

\mySamllsection{角色}

Scrum中有三个角色。第一个角色是产品所有者，是客户和其他人的联系点。产品所有者根据客户的输入编写高层次的用户故事，为每个用户故事分配优先级，并将故事放入Scrum产品待办事项列表。实际上，团队中的每个人都可以为产品待办事项列表，编写高层次的用户故事，但产品所有者决定保留哪些用户故事，哪些需要移除。

第二个角色是Scrum主管，负责保持流程运行，可以是团队的一部分，但不是团队的领导者，因为Scrum团队自行领导。Scrum主管是团队的联系人，这样其他团队成员就可以专注于任务。Scrum主管确保团队正确遵循Scrum流程，例如：通过组织每日Scrum会议，将在下一节讨论。Scrum主管和产品所有者应该是两个人。

Scrum过程中的第三个也是最后一个角色是团队本身。团队开发软件，应该保持小规模，最好少于10名成员。

\mySamllsection{流程}

每个冲刺周期开始之前，有一个冲刺规划会议，团队成员必须决定在新冲刺中将实现哪些产品特性，这在冲刺待办事项列表中正式化。特性是从包含优先级用户故事的待办事项列表中选择，这些是新功能的高阶需求。从产品待办事项列表中选择的用户故事会分解为更小的任务，并估计工作量，然后放在冲刺待办事项列表中。冲刺规划会议的持续时间取决于冲刺的长度和团队的大小，每两周的冲刺规划会议会需要两到四个小时。冲刺规划会议通常分为两部分：与产品所有者和团队讨论产品待办事项列表项优先级的会议，以及仅与团队完成的冲刺待办事项列表的会议。

在Scrum团队中，有时会发现一个物理板，即Scrum板或冲刺板，上面有三个列：To Do、In Progress和Done。每个冲刺的任务都写在纸条上，贴在正确的列上。任务在会议期间不会分配给个人；而每个团队成员都可以去板子那里，拿起To Do列中的一个任务，然后将其移动到In Progress列。当团队成员完成那个任务时，纸条移到Done列。这种方法使团队成员可以轻松地了解还需要完成哪些工作，哪些任务正在进行或已完成。也可以使用软件来与虚拟Scrum板一起工作，而不用物理板。

To Do、In Progress和Done这三个列不是固定的。也可以添加其他列，从而包括其他步骤。例如，Scrum板可能包含以下列：

\begin{itemize}
\item
To Do: 未开始的新冲刺中计划的任务

\item
In Progress: 开发分支中正在由开发者工作的任务

\item
In Review: 已实现并等待由其他团队成员进行审查的任务，也称为代码审查

\item
In Testing: 已实现并经过代码审查，等待质量保证（QA）团队批准测试的任务

\item
In Integration: 代码审查和QA批准代码更改的任务，这些更改可以从开发分支集成到主代码库，但只有在那个分支上所有测试都成功的情况下，才可以合并到主代码库

\item
Done: 已完全实现、审查、测试和集成的任务
\end{itemize}

推荐将个人任务保持小规模，短期的开发分支。

有时，还会创建每日燃尽图，该图表的水平轴显示sprint的天数，垂直轴显示剩余的开发小时数。这可以快速查看进度，并可用于确定所有计划任务是否有可能在冲刺期间完成。

Scrum过程强制每天进行一次名为每日计划、每日Scrum或每日站立会议的会议。会议上，所有团队成员与Scrum主管站在一起。这个会议每天在同一时间和地点开始，但不应超过15分钟。会议期间，应让所有团队成员都能看到冲刺板。会议上，团队查看实现冲刺目标的当前进度，任何阻碍或延迟都会进行讨论。如果需要，团队可以添加或删除当前冲刺的任务，以确保在冲刺结束时，能够实现冲刺目标。

日常会议通常包括以下三个问题，所有团队成员都要回答：

\begin{itemize}
\item
你昨天做了什么来帮助团队实现冲刺目标？

\item
你今天打算做什么来帮助团队实现冲刺目标？

\item
有什么障碍妨碍你或团队实现冲刺目标吗？
\end{itemize}

当冲刺周期结束，会有两个会议：冲刺评审会议和冲刺回顾会议。冲刺评审会议的持续时间取决于冲刺的长度和团队的大小，通常为每个冲刺的两周为两小时。冲刺评审会议期间，会向所有感兴趣的利益相关者（如产品经理、支持工程师等），展示冲刺结果和软件的当前状态。冲刺评审会议还包括讨论冲刺周期的结果，包括哪些任务已完成，哪些任务未完成，以及原因。冲刺回顾会议通常为每个冲刺的两周为1.5小时，允许团队思考上一个冲刺周期的执行情况。例如，团队可以识别流程中的不足，并为下一个冲刺调整流程。回答诸如“做得好的是什么？”、“可以改进什么？”、“我们想开始、继续或停止做什么？”等问题。这称为持续改进，在每个冲刺之后，流程本身都会进行审查并得以改进。

\mySamllsection{Scrum的好处}

Scrum对开发阶段出现的不可预见问题具有弹性。当一个问题出现时，可以在下一个冲刺中处理。团队参与了项目的每个步骤，他们与产品所有者讨论产品待办事项中的用户故事，并将这些用户故事转换为更小的任务，以包含在冲刺待办事项中。团队自主地将工作分配给其成员，并利用Scrum任务板。这个板子让团队成员很容易看到谁在做什么任务，而日常Scrum会议确保每个人都知道如何实现冲刺目标。

对利益相关者来说，每个冲刺之后都会有一个演示，展示了项目的最新迭代版本。利益相关者可以快速了解项目进展情况，并可以更改需求，这些更改通常可以纳入未来的冲刺中。

\mySamllsection{Scrum的缺点}

一些公司可能会发现，团队难以自己决定谁做什么。任务不是由经理或团队领导分配给团队成员的，所有成员从Scrum任务板中选择自己的任务。

Scrum主管是确保团队保持正轨的关键人物，Scrum主管要信任团队。\textbf{对团队成员有过多控制将导致Scrum过程失败}。

Scrum的一个潜在问题是特征蔓延，Scrum允许在开发期间向产品待办事项中添加新的用户故事。这里存在一个危险，即项目经理会不断向产品待办事项中添加新功能。最好的解决办法是尽早决定最终发布日期或最后一个冲刺的结束日期。

\mySubsubsection{28.3.2}{统一过程}

统一过程（UP）是一种迭代和增量的软件开发过程。统一过程不是固定的；它是一个框架，应该根据项目的具体需求对其进行定制。根据统一过程，项目可以分为四个阶段：

\begin{itemize}
\item
启动(Inception)：这个阶段通常非常短。包括可行性研究、编写业务案例、决定项目是否应该由内部开发或从第三方供应商购买、定义成本和时间表的大致估计，以及定义范围。

\item
细化(Elaboration)：记录下来大部分需求。处理风险因素，验证系统架构。为了验证架构，构建了架构核心部分的交付件。这应该证明开发的架构将能够支持整个系统。

\item
构建(Construction)：细化阶段的可执行架构交付之上实现所有需求。

\item
过渡(Transition)：将产品交付给客户，后续的过渡迭代中处理客户的反馈。
\end{itemize}

所有阶段都可分割成时间盒的迭代，每个迭代都有一个有形的结果。每个迭代中，团队同时进行项目的几个学科的工作：业务建模、需求、分析和设计、实现、测试和部署。每个学科的工作量随着每个迭代而变化。图28.6展示了这种迭代和重叠的开发方法。这个例子中，启动阶段在一个迭代中完成，细化阶段在两个迭代中完成，构建阶段在四个迭代中完成，过渡阶段在两个迭代中完成。

\myGraphic{0.8}{content/part5/chapter28/images/6.png}{图 28.6}

\mySubsubsection{28.3.3}{Rational统一过程}

Rational统一过程（RUP）是统一过程的最著名的改进，它是一种有纪律和正式的软件开发过程管理方法。RUP最重要的特征是，与螺旋模型或瀑布模型不同，RUP不仅仅是一个理论上的过程模型。RUP实际上是由IBM的Rational软件部门销售的一个软件产品，将过程本身视为软件带来了一些有趣的优点：

\begin{itemize}
\item
过程本身可以更新和优化，就像软件产品定期更新一样。

\item
RUP不仅仅建议一个开发框架，还包括一组与该框架一起使用的软件工具。

\item
作为一个产品，RUP可以推广到整个工程团队，以便所有成员都使用完全相同的过程和工具。

\item
与许多软件产品一样，RUP可以根据其用户的需求进行定制。
\end{itemize}

\mySamllsection{RUP作为产品}

作为产品，RUP以一系列软件应用程序的形式出现，引导开发人员通过软件开发过程。该产品还为其他Rational产品提供了具体的指导，例如：Rational Rose可视建模工具和Rational ClearCase配置管理工具。大量群件通信工具作为“思想的交流市场”的一部分，允许开发人员分享知识。

RUP背后的一个基本原则是，每个开发周期的迭代都应该有一个有形的结果。Rational统一过程中，用户将创建许多设计、需求文档、报告和计划。RUP软件为这些工件的创建提供了可视化和开发工具。

\mySamllsection{RUP作为流程}

定义一个准确的模型是RUP的核心原则。根据RUP，模型有助于解释软件开发过程中复杂的结构和关系。在RUP中，模型通常以统一建模语言（UML）格式表达；请参阅附录D。

RUP将每个过程部分定义为单独的工作流程（在统一过程中称为学科）。工作流程以谁负责该步骤、执行哪些任务、这些任务的结果（即工件或成果），以及推动任务的序列事件来表示每个过程步骤。RUP的一切都可定制，但RUP预定义了一些核心过程工作流程。

核心过程工作流程与瀑布模型的阶段有些相似，但每个都是迭代的，并且定义更具体。业务建模工作流程通过建模业务流程，通常以推动软件需求为目标。需求工作流程通过分析系统中的问题，并迭代其假设来创建需求定义。分析和设计工作流程处理系统架构和子系统设计，实施工作流程涵盖软件子系统的建模、编码和集成。测试工作流程通过规划、实施和评估软件质量测试来建模，部署工作流程是对整体规划、发布、支持和测试工作流程的高阶视图。配置管理工作流程从新项目构思，到迭代和产品结束的场景。最后，环境工作流程通过创建和维护开发工具来支持工程组织。

\mySamllsection{实践RUP}

RUP主要面向大型组织，并提供了相对于传统生命周期模型的采用的几个优势。团队掌握了使用软件的曲线，所有成员都将使用一个共同的平台来设计、交流和实现他们的想法。该流程可以根据团队的需求进行定制，每个阶段都揭示了大量有价值的工件，这些工件记录了开发的每个阶段。

像RUP这样的产品对于某些组织来说可能过于沉重。拥有多样化开发环境或预算紧张的团队，可能不想或无法标准化为基于软件的开发系统。学习曲线也可能是一个因素；不熟悉流程软件的新工程师需要学习如何使用它，同时还要熟悉产品和现有代码库。

\mySubsubsection{28.3.4}{极限编程(XP，Extreme Programming)}

几年前，我的一位朋友下班回家后告诉他的妻子，他的公司采用了极限编程的原则，她开玩笑地说：“我希望你戴上安全带。”尽管这个名字有点滑稽，但极限编程（XP）有效地打包了其他软件开发指南的优点，并添加了一些新材料。

XP由Kent Beck在《极限编程解释》（Addison-Wesley，1999年）中推广，声称将优秀的软件开发实践提升到一个更高的水平。例如，大多数开发者都认为测试是一件好事。在XP中，测试非常重要，以至于应该在编写代码之前编写测试。

\mySamllsection{XP的理论}

XP方法论由十二个指导原则组成，分为四个类别。这些原则贯穿于软件开发过程的所有阶段，并对工程师的日常任务产生直接影响。

\mySamllsection{第一类：精细反馈}

XP提供了四个与编码、规划和测试相关的精细指南。

\mySamllsection{结对编程}

XP建议所有生产代码都应该由两个人并肩编写，这种技术称为结对编程，但只有一个人可以实际控制键盘。另一个人审查他同行编写的代码，并采取高层次的方法，考虑测试、必要的重构和项目整体模型等问题。

例如，你负责为应用程序的某个特定特性编写用户界面，可能想让该特性的原始作者与你一起工作。他可以指导你正确使用该特性，警告要注意的“陷阱”，并在高层次上帮助和监督工作。即使不能获得原始作者的帮助，只是拉上团队的其他成员也会有所帮助。XP的理论是，结对编程可以建立共享知识，确保正确的设计，并建立一种非正式的检查和平衡机制。

\mySamllsection{规划游戏}

瀑布模型中，规划只发生在过程的开始。螺旋模型中，规划是每个迭代的第一个阶段。XP中，规划不仅仅是一个步骤——它是一个持续的任务。XP团队从一个粗略的计划开始，该计划捕获了正在开发的产品的要点。每个过程迭代期间，都会举行规划游戏会议。在整个开发过程中，根据需要不断细化和修改计划。XP的理论是，条件不断变化，不断获取新信息。规划过程有两个主要部分：

\begin{itemize}
\item
发布规划：开发人员和客户之间的会议，其目标是确定哪些需求需要包含在即将发布的规划中。

\item
迭代规划：仅由开发人员进行的会议，规划了开发人员实际需要执行的任务。
\end{itemize}

XP中对给定特性的估计，始终由将实现该特定特性的人进行。这有助于避免实施者遵守不切实际和人为设定的时间表的情况。最初，估计非常粗略，可能是一个特性所需的周数。随着时间线的缩短，估计变得更加细化。特性可分解为不超过五天的任务。

\mySamllsection{持续测试}

根据《极限编程解释》，“没有自动化测试的程序特性都不存在。” XP对测试非常热衷。作为XP工程师的一部分责任是编写伴随代码的单元测试。单元测试通常是一小段代码，确保一个单独的功能模块工作。例如，基于文件的存储对象的单个单元测试，可能包括testSaveObject、testLoadObject和testDeleteObject。

XP将单元测试进一步推进，建议在实际代码编写之前编写单元测试。测试不会通过，因为代码还没有编写。理论上，如果测试足够全面，应该知道代码何时完成，所有的测试都会成功运行，但很难知道测试是否足够全面。必须考虑在实现代码时可能引入的不同类型的错误，以及测试是否能够捕获这些错误，编写好的测试可能比编写好的代码要困难得多。实际代码编写之前编写单元测试的过程，称为测试驱动开发（TDD）。我告诉过你，这非常“极端”。

\mySamllsection{让客户在场}

由于XP精通的工程团队不断精炼其产品计划，并只构建当前所需的功能，让客户参与过程很有价值。尽管通常不可能说服客户在开发过程中亲临现场，工程与最终用户之间应该有沟通的想法显然是一个有价值的概念。除了帮助设计单个特性之外，客户还可以通过表明个人需求来确定任务的优先级。

\mySamllsection{第二类：持续过程}

XP提倡使用持续集成系统，以便尽早发现系统之间的不匹配。还应该在必要时重构代码，并努力构建和部署小的增量发布。

\mySamllsection{持续集成}

所有开发者都熟悉集成代码任务的可怕。当发现对系统的看法与实际编写方式完全不匹配时，这项任务就变成了噩梦。当系统组合在一起时，问题就暴露出来了。XP认识到这一现象，并提倡在开发过程中频繁地将代码集成到项目中。

开发过程中，工程师应该在将代码提交到仓库之前运行所有测试。此外，指定的一台机器不断运行自动化测试。当自动化测试失败时，团队会收到一封电子邮件，指出问题并列出最近的提交。

建议在开发分支上设置流程，以便只有在开发分支上所有测试都成功运行时，才能将分支合并到主代码库。

\mySamllsection{必要时重构}

大多数程序员不时地重构他们的代码。重构是重新设计现有工作代码的过程，以考虑编写代码后发现的新知识、新的上游API或发现的替代用途。重构难以融入传统软件工程时间表，结果不如实现新特性那么具体，但好的管理者认识到其对长期代码可维护性的重要性。

XP提倡在开发过程中识别重构的用武之地，并在适当的时候进行重构。而不是在发布开始时决定，现有产品部分需要设计工作，XP开发者需要学会识别重构代码的迹象。虽然这种做法肯定会导致意外和未计划的任务，但当重构代码时，未来开发应该会更容易。

\mySamllsection{构建小版本}

XP的一个理论是，当软件项目试图一次完成太多工作时，会变得具有风险和难以控制。XP提倡较小的版本发布，时间跨度更接近两个月，而不是十八个月。这样的小周期意味着只有最重要的特性才能进入产品，迫使工程和营销部门就真正重要的特性达成共识。

\mySamllsection{第三类：共享理解}

软件是由一个团队开发的。编写的代码都不属于个人，而属于整个团队。XP给出了一些指导方针，以确保代码和想法的共享。

\mySamllsection{共享编码标准}

由于共同拥有代码的原则以及结对编程的做法，极端环境中的编码可能很困难，如果每个工程师都有自己的命名和缩进约定。XP不提倡特定的风格，但建议如果能看一段代码，并立即识别作者，团队可能需要更好地定义其编码标准。

关于各种编码风格的更多信息，请参见第3章。

\mySamllsection{代码共享}

许多传统的开发环境中，代码所有权被强制定义并经常得到执行。我的一位朋友曾经在一个环境中工作，那里的一位经理，明确禁止任何人检查其他团队成员编写的代码。XP采取了截然相反的方法，宣称代码由所有人共同拥有。

集体所有权在实际中有几个实际原因。从管理的角度看，当一个工程师突然离开时，影响较小，因为其他人也理解那部分代码。增加项目的“巴士因子”，代表了使项目停滞所需的最小工程师数量。从工程师的角度看，集体所有权建立了一个关于系统如何工作的共同认知。这有助于设计任务，并使单个开发者能够自由地做出将增加项目整体价值的更改。

关于集体所有权的一个重要说明是，并不需要每个开发者都熟悉代码中的每一行。更多的是心态，即项目是一个团队的努力，也没有理由让任何一个人独占。

\mySamllsection{简化设计}

XP的工程师经常哼哼的一句格言是“避免投机性的普遍性”，也称为KISS，“保持简单，愚蠢”。这违背了许多程序员的自然倾向。如果分配设计一个基于文件的对象存储的任务，你可能会开始创建一个解决所有基于文件存储问题的最终解决方案，设计可能会迅速演变为覆盖多种语言和任何类型的对象。XP说应该向通用性——特定性的连续体的另一端倾斜。而不是创建一个赢得奖项，并受到同行称赞的理想对象，设计一个最简单的对象存储，能够完成任务。应该理解当前的需求，并根据这些规范编写代码，以避免编写过于复杂的代码。

可能很难适应设计中的简单性。根据工作类型，代码可能需要存在多年，并被其他代码所使用。正如第6章所讨论的，为未来构建功能的问题是，不知道这些假设的使用情况是什么，也没有办法为纯粹的推测设计一个好的设计。其中一个假设的情况（可能永远不会实现）设计，可能会阻止适应另一个非常有用的情况（除非重构整个设计）。XP说应该构建一个今天有用的东西，并留有机会可以在以后进行修改。

\mySamllsection{共享隐喻}

XP使用术语“隐喻”来表达所有团队成员（包括客户和管理员），都应该共享系统的观点。这并不指对象如何通信的具体细节，或将要编写的API。而是指系统的组件的思维模型和命名模型，每个组件都应该有一个描述性的名称，以便团队成员仅凭名称就能猜测其功能。

\mySamllsection{第4类：开发者福利}

XP的最后一个指导原则是关于开发者的福利。

\mySamllsection{合理的工作时间}

XP对投入的工作时间有几点要说。主张认为一个休息充足的开发者，是一个快乐和高效的开发者。XP倡导每周大约40小时的工作时长，并警告不要连续加班超过两周。

当然，不同的人需要的休息时间不同。主要是，如果在头脑不清楚的情况下坐下编写代码，将编写糟糕的代码，并放弃XP的许多原则。

\mySamllsection{实践XP}

XP的信徒声称，极限编程的十二个原则如此交织在一起，以至于采用其中一些。而不采用其他原则，都会大大破坏这种方法。例如，结对编程对测试至关重要，如果无法确定如何测试特定代码块，你的伙伴可以提供帮助。另外，如果有一天太累了，决定跳过测试，你的伙伴会在那里阻止你做这件事。

然而，XP的一些指导原则可能难以实施。对于一些工程师来说，编写代码之前编写测试的想法太抽象了。对于这些工程师来说，可能是测试设计而不实现，直到有代码可以测试。XP的许多原则都是严格定义的，但如果理解这些原则背后的理论，可能能够找到适应项目需求的方法。

XP的协作方面也可能具有挑战性。结对编程具有可衡量的益处，但如果一个经理无法合理化每天只有原来一半的人实际编写代码，这可能会很困难。团队的一些成员可能甚至对这种紧密的合作感到不舒服，可能发现边打字边让别人看很困难。XP不适合某些个性类型，特别是内向的人可能不喜欢结对编程。如果团队在地理上分散，或者成员经常远程工作，结对编程也会面临明显的挑战。

对于一些组织来说，极限编程可能过于激进。具有正式工程政策的成熟大型公司，很难以采用像XP这样的方法。然而，即使你的公司抵制XP的实施，通过理解其背后的理论，仍然可以通过这种方式提高自己的生产力。

\mySubsubsection{28.3.5}{软件急救}

书籍《死亡行军》（Prentice Hall，1997年）中，Edward Yourdon描述了软件项目经常陷入的可怕现象：进度落后、人员短缺、预算超支或设计糟糕。Yourdon的理论是，当软件项目陷入这种状态时，即使是最好的现代软件开发方法论也将不再适用。正如本章中学到的，许多软件开发方法论都是围绕正式文件或以用户为中心的设计建立的。一个已经处于“死亡行军”模式的项目中，根本没有时间进行这些方法论。

软件急救背后的理念是，当项目已经处于糟糕状态时，资源会非常稀缺。

时间稀缺，工程师稀缺，资金可能也稀缺。当项目严重落后时，经理和开发人员需要克服的主要心理障碍是，在规定的时间内不可能满足原始要求。任务会变成了将剩余功能组织成“必须有”、“应该有”和“最好有”的列表。

软件急救是一个令人畏惧的过程，通常需要一个外部资深人士来做出艰难的决定，这个人经历过“死亡行军”项目。对于工程师来说，最重要的是，为了按时完成项目，可能需要放弃熟悉的过程（甚至是一些现有代码）。

